{"ast":null,"code":"import { CART_EMPTY } from \"../Constants/cartConstants.js\";\nimport { ORDER_CREATE_FAIL, ORDER_CREATE_REQUEST, ORDER_CREATE_SUCCESS, ORDER_DETAILS_FAIL, ORDER_DETAILS_REQUEST, ORDER_DETAILS_SUCCESS } from \"../Constants/orderConstants\";\nimport Axios from 'axios';\nexport const createOrder = order => async (dispatch, getState) => {\n  console.log(order);\n  dispatch({\n    type: ORDER_CREATE_REQUEST,\n    payload: order\n  });\n\n  try {\n    const {\n      userSignin: {\n        userInfo\n      }\n    } = getState();\n    console.log(userInfo);\n    const {\n      data\n    } = await Axios.post('/api/orders', order, {\n      headers: {\n        authorization: `Bearer ${userInfo.token}`\n      }\n    });\n    dispatch({\n      type: ORDER_CREATE_SUCCESS,\n      payload: data.order\n    });\n    dispatch({\n      type: CART_EMPTY\n    });\n    localStorage.removeItem('cartItems');\n  } catch (err) {\n    dispatch({\n      type: ORDER_CREATE_FAIL,\n      payload: err.response && err.response.data.message ? err.response.data.message : err.message\n    });\n  }\n};\nexport const detailsOrder = orderId => async (dispatch, getState) => {\n  dispatch({\n    type: ORDER_DETAILS_REQUEST,\n    payload: orderId\n  });\n  const {\n    userSign: {\n      userInfo\n    }\n  } = getState();\n\n  try {\n    const {\n      data\n    } = await Axios.get(`/api/orders/${orderId}`, {\n      headers: {\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    });\n    dispatch({\n      type: ORDER_DETAILS_SUCCESS,\n      payload: data\n    });\n  } catch (err) {\n    const message = err.response && err.response.data.message ? err.response.data.message : err.message;\n    dispatch({\n      type: ORDER_DETAILS_FAIL,\n      payload: message\n    });\n  }\n};","map":{"version":3,"sources":["E:/LocalMart/frontend/src/actions/orderActions.js"],"names":["CART_EMPTY","ORDER_CREATE_FAIL","ORDER_CREATE_REQUEST","ORDER_CREATE_SUCCESS","ORDER_DETAILS_FAIL","ORDER_DETAILS_REQUEST","ORDER_DETAILS_SUCCESS","Axios","createOrder","order","dispatch","getState","console","log","type","payload","userSignin","userInfo","data","post","headers","authorization","token","localStorage","removeItem","err","response","message","detailsOrder","orderId","userSign","get","Authorization"],"mappings":"AAAA,SAASA,UAAT,QAA2B,+BAA3B;AACA,SAASC,iBAAT,EAA4BC,oBAA5B,EAAkDC,oBAAlD,EAAwEC,kBAAxE,EAA4FC,qBAA5F,EAAmHC,qBAAnH,QAAgJ,6BAAhJ;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,MAAMC,WAAW,GAAEC,KAAD,IAAS,OAAMC,QAAN,EAAeC,QAAf,KAA0B;AACxDC,EAAAA,OAAO,CAACC,GAAR,CAAYJ,KAAZ;AACAC,EAAAA,QAAQ,CAAC;AAACI,IAAAA,IAAI,EAACZ,oBAAN;AAA2Ba,IAAAA,OAAO,EAACN;AAAnC,GAAD,CAAR;;AACA,MAAG;AACC,UAAM;AAACO,MAAAA,UAAU,EAAC;AAACC,QAAAA;AAAD;AAAZ,QAAwBN,QAAQ,EAAtC;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYI,QAAZ;AACH,UAAM;AAACC,MAAAA;AAAD,QAAO,MAAMX,KAAK,CAACY,IAAN,CAAW,aAAX,EAAyBV,KAAzB,EAA+B;AAC9CW,MAAAA,OAAO,EAAC;AACJC,QAAAA,aAAa,EAAE,UAASJ,QAAQ,CAACK,KAAM;AADnC;AADsC,KAA/B,CAAnB;AAKAZ,IAAAA,QAAQ,CAAC;AAACI,MAAAA,IAAI,EAACX,oBAAN;AAA2BY,MAAAA,OAAO,EAACG,IAAI,CAACT;AAAxC,KAAD,CAAR;AACAC,IAAAA,QAAQ,CAAC;AAACI,MAAAA,IAAI,EAACd;AAAN,KAAD,CAAR;AACAuB,IAAAA,YAAY,CAACC,UAAb,CAAwB,WAAxB;AACA,GAXD,CAWC,OAAMC,GAAN,EAAU;AACPf,IAAAA,QAAQ,CAAC;AAACI,MAAAA,IAAI,EAACb,iBAAN;AACTc,MAAAA,OAAO,EAACU,GAAG,CAACC,QAAJ,IAAcD,GAAG,CAACC,QAAJ,CAAaR,IAAb,CAAkBS,OAAhC,GACRF,GAAG,CAACC,QAAJ,CAAaR,IAAb,CAAkBS,OADV,GACkBF,GAAG,CAACE;AAFrB,KAAD,CAAR;AAIH;AACJ,CApBM;AAqBP,OAAO,MAAMC,YAAY,GAAEC,OAAD,IAAW,OAAMnB,QAAN,EAAeC,QAAf,KAA0B;AAC3DD,EAAAA,QAAQ,CAAC;AAACI,IAAAA,IAAI,EAACT,qBAAN;AAA4BU,IAAAA,OAAO,EAACc;AAApC,GAAD,CAAR;AACA,QAAM;AAACC,IAAAA,QAAQ,EAAC;AAACb,MAAAA;AAAD;AAAV,MAAsBN,QAAQ,EAApC;;AACA,MAAG;AACF,UAAM;AAACO,MAAAA;AAAD,QAAO,MAAMX,KAAK,CAACwB,GAAN,CAAW,eAAcF,OAAQ,EAAjC,EAAmC;AAClDT,MAAAA,OAAO,EAAC;AAACY,QAAAA,aAAa,EAAE,UAASf,QAAQ,CAACK,KAAM;AAAxC;AAD0C,KAAnC,CAAnB;AAGAZ,IAAAA,QAAQ,CAAC;AAACI,MAAAA,IAAI,EAACR,qBAAN;AAA4BS,MAAAA,OAAO,EAACG;AAApC,KAAD,CAAR;AAEA,GAND,CAMC,OAAMO,GAAN,EAAU;AACP,UAAME,OAAO,GAACF,GAAG,CAACC,QAAJ,IAAcD,GAAG,CAACC,QAAJ,CAAaR,IAAb,CAAkBS,OAAhC,GACdF,GAAG,CAACC,QAAJ,CAAaR,IAAb,CAAkBS,OADJ,GACYF,GAAG,CAACE,OAD9B;AAEAjB,IAAAA,QAAQ,CAAC;AAACI,MAAAA,IAAI,EAACV,kBAAN;AAAyBW,MAAAA,OAAO,EAACY;AAAjC,KAAD,CAAR;AAEH;AACJ,CAfM","sourcesContent":["import { CART_EMPTY } from \"../Constants/cartConstants.js\";\r\nimport { ORDER_CREATE_FAIL, ORDER_CREATE_REQUEST, ORDER_CREATE_SUCCESS, ORDER_DETAILS_FAIL, ORDER_DETAILS_REQUEST, ORDER_DETAILS_SUCCESS } from \"../Constants/orderConstants\"\r\nimport Axios from 'axios';\r\nexport const createOrder=(order)=>async(dispatch,getState)=>{\r\n    console.log(order);\r\n    dispatch({type:ORDER_CREATE_REQUEST,payload:order});\r\n    try{\r\n        const {userSignin:{userInfo}}=getState();\r\n        console.log(userInfo);\r\n     const {data}=await Axios.post('/api/orders',order,{\r\n         headers:{\r\n             authorization:`Bearer ${userInfo.token}`,\r\n         }\r\n     })\r\n     dispatch({type:ORDER_CREATE_SUCCESS,payload:data.order});\r\n     dispatch({type:CART_EMPTY});\r\n     localStorage.removeItem('cartItems');\r\n    }catch(err){\r\n        dispatch({type:ORDER_CREATE_FAIL,\r\n        payload:err.response&&err.response.data.message?\r\n        err.response.data.message:err.message,\r\n        });\r\n    }\r\n}\r\nexport const detailsOrder=(orderId)=>async(dispatch,getState)=>{\r\n    dispatch({type:ORDER_DETAILS_REQUEST,payload:orderId});\r\n    const {userSign:{userInfo}}=getState();\r\n    try{\r\n     const {data}=await Axios.get(`/api/orders/${orderId}`,{\r\n         headers:{Authorization:`Bearer ${userInfo.token}`}\r\n     });\r\n     dispatch({type:ORDER_DETAILS_SUCCESS,payload:data});\r\n\r\n    }catch(err){\r\n        const message=err.response&&err.response.data.message?\r\n        err.response.data.message:err.message;\r\n        dispatch({type:ORDER_DETAILS_FAIL,payload:message});\r\n\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}