{"ast":null,"code":"import { CART_EMPTY } from \"../Constants/cartConstants.js\";\nimport { ORDER_CREATE_FAIL, ORDER_CREATE_REQUEST, ORDER_CREATE_SUCCESS } from \"../Constants/orderConstants\";\nimport Axios from 'axios';\nexport const createOrder = order => async (dispatch, getState) => {\n  console.log(order);\n  dispatchEvent({\n    type: ORDER_CREATE_REQUEST,\n    payload: order\n  });\n\n  try {\n    const {\n      userSignin: {\n        userInfo\n      }\n    } = getState();\n    const {\n      data\n    } = await Axios.post('/api/orders', order, {\n      headers: {\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    });\n    dispatch({\n      type: ORDER_CREATE_SUCCESS,\n      payload: data.order\n    });\n    dispatch({\n      type: CART_EMPTY\n    });\n    localStorage.removeItem('cartItems');\n  } catch (err) {\n    dispatch({\n      type: ORDER_CREATE_FAIL,\n      payload: err.response && err.response.data.message ? err.response.data.message : err.message\n    });\n  }\n};","map":{"version":3,"sources":["E:/LocalMart/frontend/src/actions/orderActions.js"],"names":["CART_EMPTY","ORDER_CREATE_FAIL","ORDER_CREATE_REQUEST","ORDER_CREATE_SUCCESS","Axios","createOrder","order","dispatch","getState","console","log","dispatchEvent","type","payload","userSignin","userInfo","data","post","headers","Authorization","token","localStorage","removeItem","err","response","message"],"mappings":"AAAA,SAASA,UAAT,QAA2B,+BAA3B;AACA,SAASC,iBAAT,EAA4BC,oBAA5B,EAAkDC,oBAAlD,QAA8E,6BAA9E;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,MAAMC,WAAW,GAAEC,KAAD,IAAS,OAAMC,QAAN,EAAeC,QAAf,KAA0B;AACxDC,EAAAA,OAAO,CAACC,GAAR,CAAYJ,KAAZ;AACAK,EAAAA,aAAa,CAAC;AAACC,IAAAA,IAAI,EAACV,oBAAN;AAA2BW,IAAAA,OAAO,EAACP;AAAnC,GAAD,CAAb;;AACA,MAAG;AACC,UAAM;AAACQ,MAAAA,UAAU,EAAC;AAACC,QAAAA;AAAD;AAAZ,QAAwBP,QAAQ,EAAtC;AACH,UAAM;AAACQ,MAAAA;AAAD,QAAO,MAAMZ,KAAK,CAACa,IAAN,CAAW,aAAX,EAAyBX,KAAzB,EAA+B;AAC9CY,MAAAA,OAAO,EAAC;AACJC,QAAAA,aAAa,EAAE,UAASJ,QAAQ,CAACK,KAAM;AADnC;AADsC,KAA/B,CAAnB;AAKAb,IAAAA,QAAQ,CAAC;AAACK,MAAAA,IAAI,EAACT,oBAAN;AAA2BU,MAAAA,OAAO,EAACG,IAAI,CAACV;AAAxC,KAAD,CAAR;AACAC,IAAAA,QAAQ,CAAC;AAACK,MAAAA,IAAI,EAACZ;AAAN,KAAD,CAAR;AACAqB,IAAAA,YAAY,CAACC,UAAb,CAAwB,WAAxB;AACA,GAVD,CAUC,OAAMC,GAAN,EAAU;AACPhB,IAAAA,QAAQ,CAAC;AAACK,MAAAA,IAAI,EAACX,iBAAN;AACTY,MAAAA,OAAO,EAACU,GAAG,CAACC,QAAJ,IAAcD,GAAG,CAACC,QAAJ,CAAaR,IAAb,CAAkBS,OAAhC,GACRF,GAAG,CAACC,QAAJ,CAAaR,IAAb,CAAkBS,OADV,GACkBF,GAAG,CAACE;AAFrB,KAAD,CAAR;AAIH;AACJ,CAnBM","sourcesContent":["import { CART_EMPTY } from \"../Constants/cartConstants.js\";\r\nimport { ORDER_CREATE_FAIL, ORDER_CREATE_REQUEST, ORDER_CREATE_SUCCESS } from \"../Constants/orderConstants\"\r\nimport Axios from 'axios';\r\nexport const createOrder=(order)=>async(dispatch,getState)=>{\r\n    console.log(order);\r\n    dispatchEvent({type:ORDER_CREATE_REQUEST,payload:order});\r\n    try{\r\n        const {userSignin:{userInfo}}=getState();\r\n     const {data}=await Axios.post('/api/orders',order,{\r\n         headers:{\r\n             Authorization:`Bearer ${userInfo.token}`,\r\n         }\r\n     })\r\n     dispatch({type:ORDER_CREATE_SUCCESS,payload:data.order});\r\n     dispatch({type:CART_EMPTY});\r\n     localStorage.removeItem('cartItems');\r\n    }catch(err){\r\n        dispatch({type:ORDER_CREATE_FAIL,\r\n        payload:err.response&&err.response.data.message?\r\n        err.response.data.message:err.message,\r\n        });\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}