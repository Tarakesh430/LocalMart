{"ast":null,"code":"import Axios from \"axios\";\nimport { USER_DETAILS_FAIL, USER_DETAILS_REQUEST, USER_DETAILS_SUCCESS, USER_REGISTER_FAIL, USER_REGISTER_REQUEST, USER_REGISTER_SUCCESS, USER_SIGNIN_FAIL, USER_SIGNIN_REQUEST, USER_SIGNIN_SUCCESS, USER_SIGNOUT, USER_UPDATE_PROFILE_FAIL, USER_UPDATE_PROFILE_REQUEST, USER_UPDATE_PROFILE_SUCCESS } from \"../Constants/userConstants\";\nexport const signin = (email, password) => async (dispatch, getState) => {\n  dispatch({\n    type: USER_SIGNIN_REQUEST,\n    payload: {\n      email,\n      password\n    }\n  });\n\n  try {\n    const {\n      data\n    } = await Axios.post('/api/users/signin', {\n      email,\n      password\n    });\n    dispatch({\n      type: USER_SIGNIN_SUCCESS,\n      payload: data\n    });\n    localStorage.setItem(\"userInfo\", JSON.stringify(data));\n  } catch (error) {\n    dispatch({\n      type: USER_SIGNIN_FAIL,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};\nexport const signout = () => dispatch => {\n  localStorage.removeItem('userInfo');\n  localStorage.removeItem('cartItems');\n  localStorage.removeItem('shippingAddress');\n  dispatch({\n    type: USER_SIGNOUT\n  });\n};\nexport const register = (name, email, password) => async (dispatch, getState) => {\n  dispatch({\n    type: USER_REGISTER_REQUEST,\n    payload: {\n      name,\n      email,\n      password\n    }\n  });\n\n  try {\n    const {\n      data\n    } = await Axios.post('/api/users/register', {\n      name,\n      email,\n      password\n    });\n    dispatch({\n      type: USER_REGISTER_SUCCESS,\n      payload: data\n    });\n    dispatch({\n      type: USER_SIGNIN_SUCCESS,\n      payload: data\n    });\n    localStorage.setItem(\"userInfo\", JSON.stringify(data));\n  } catch (error) {\n    dispatch({\n      type: USER_REGISTER_FAIL,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};\nexport const detailsUser = userId => async (dispatch, getState) => {\n  dispatch({\n    type: USER_DETAILS_REQUEST,\n    payload: userId\n  });\n  const {\n    userSignin: {\n      userInfo\n    }\n  } = getState();\n\n  try {\n    const {\n      data\n    } = await Axios.get(`/api/users/${userId}`, {\n      headers: {\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    });\n    console.log(data);\n    dispatch({\n      type: USER_DETAILS_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    dispatch({\n      type: USER_DETAILS_FAIL,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};\nexport const updateUserProfile = user => async (dispatch, getState) => {\n  dispatch({\n    type: USER_UPDATE_PROFILE_REQUEST,\n    payload: user\n  });\n  const {\n    userSignin: {\n      userInfo\n    }\n  } = getState();\n\n  try {\n    const {\n      data\n    } = await Axios.put(`/api/users/profile`, user, {\n      headers: {\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    });\n    dispatch({\n      type: USER_UPDATE_PROFILE_SUCCESS,\n      payload: data\n    });\n    dispatch({\n      type: USER_SIGNIN_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    dispatch({\n      type: USER_UPDATE_PROFILE_FAIL,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};","map":{"version":3,"sources":["E:/LocalMart/frontend/src/actions/userActions.js"],"names":["Axios","USER_DETAILS_FAIL","USER_DETAILS_REQUEST","USER_DETAILS_SUCCESS","USER_REGISTER_FAIL","USER_REGISTER_REQUEST","USER_REGISTER_SUCCESS","USER_SIGNIN_FAIL","USER_SIGNIN_REQUEST","USER_SIGNIN_SUCCESS","USER_SIGNOUT","USER_UPDATE_PROFILE_FAIL","USER_UPDATE_PROFILE_REQUEST","USER_UPDATE_PROFILE_SUCCESS","signin","email","password","dispatch","getState","type","payload","data","post","localStorage","setItem","JSON","stringify","error","response","message","signout","removeItem","register","name","detailsUser","userId","userSignin","userInfo","get","headers","Authorization","token","console","log","updateUserProfile","user","put"],"mappings":"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","sourcesContent":["import Axios from \"axios\";\r\nimport { USER_DETAILS_FAIL, USER_DETAILS_REQUEST, USER_DETAILS_SUCCESS, USER_REGISTER_FAIL, USER_REGISTER_REQUEST, USER_REGISTER_SUCCESS, USER_SIGNIN_FAIL, USER_SIGNIN_REQUEST, USER_SIGNIN_SUCCESS, USER_SIGNOUT, USER_UPDATE_PROFILE_FAIL, USER_UPDATE_PROFILE_REQUEST, USER_UPDATE_PROFILE_SUCCESS } from \"../Constants/userConstants\"\r\n\r\n export const signin=(email,password)=>async(dispatch,getState)=>{\r\n     dispatch({type:USER_SIGNIN_REQUEST,payload:{email,password}});\r\n     try{\r\n       const {data}=await Axios.post('/api/users/signin',{email,password});\r\n       dispatch({type:USER_SIGNIN_SUCCESS,payload:data});\r\n       localStorage.setItem(\"userInfo\",JSON.stringify(data));\r\n     }\r\n     catch(error){\r\n       dispatch({\r\n           type:USER_SIGNIN_FAIL,\r\n           payload : error.response && error.response.data.message?error.response.data.message : error.message,\r\n       });\r\n     }\r\n }\r\n export const signout=()=>(dispatch)=>{\r\n     localStorage.removeItem('userInfo');\r\n     localStorage.removeItem('cartItems');\r\n     localStorage.removeItem('shippingAddress');\r\n     dispatch({type:USER_SIGNOUT});\r\n }\r\n export const register=(name,email,password)=>async(dispatch,getState)=>{\r\n  dispatch({type:USER_REGISTER_REQUEST,payload:{name,email,password}});\r\n  try{\r\n    const {data}=await Axios.post('/api/users/register',{name,email,password});\r\n    dispatch({type:USER_REGISTER_SUCCESS,payload:data});\r\n    dispatch({type:USER_SIGNIN_SUCCESS,payload:data});\r\n    localStorage.setItem(\"userInfo\",JSON.stringify(data));\r\n  }\r\n  catch(error){\r\n    dispatch({\r\n        type:USER_REGISTER_FAIL,\r\n        payload : error.response && error.response.data.message?error.response.data.message : error.message,\r\n    });\r\n  }\r\n}\r\nexport const detailsUser=(userId)=>async(dispatch,getState)=>{\r\n  dispatch({type:USER_DETAILS_REQUEST,payload:userId});\r\n  const  {userSignin:{userInfo}}=getState();\r\n  try{\r\n    const {data}=await Axios.get(`/api/users/${userId}`,{\r\n      headers:{Authorization:`Bearer ${userInfo.token}`}\r\n    });\r\n    console.log(data);\r\n    dispatch({type:USER_DETAILS_SUCCESS,payload:data});\r\n  }catch(error){\r\n    dispatch({type:USER_DETAILS_FAIL,\r\n      payload : error.response && error.response.data.message?error.response.data.message : error.message,\r\n    });\r\n  }\r\n};\r\n\r\nexport const updateUserProfile=(user)=>async(dispatch,getState)=>{\r\n  dispatch({type:USER_UPDATE_PROFILE_REQUEST,payload:user});\r\n  const {userSignin:{userInfo}}=getState();\r\n  try{\r\n    const {data}=await Axios.put(`/api/users/profile`,user,{\r\n      headers:{Authorization:`Bearer ${userInfo.token}`}\r\n    });\r\n    dispatch({type:USER_UPDATE_PROFILE_SUCCESS,payload:data});\r\n    dispatch({type:USER_SIGNIN_SUCCESS,payload:data});\r\n  }catch(error){\r\n    dispatch({type:USER_UPDATE_PROFILE_FAIL,\r\n      payload : error.response && error.response.data.message?error.response.data.message : error.message,\r\n    });\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}